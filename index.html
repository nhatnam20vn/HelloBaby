<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fly Hiragana Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            font-family: 'Arial', sans-serif;
            height: 100vh;
            cursor: crosshair;
        }
        
        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .hiragana {
            position: absolute;
            font-size: 30px;
            font-weight: bold;
            color: #333;
            text-shadow: 1px 1px 2px white;
            user-select: none;
            transition: transform 0.1s;
        }
        
        .hiragana:hover {
            transform: scale(1.2);
        }
        
        .tenten {
            position: absolute;
            font-size: 15px;
            color: red;
        }
        
        .maruyama {
            position: absolute;
            font-size: 15px;
            color: blue;
        }
        
        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: white;
            background-color: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        #controls {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 5px;
            color: white;
            text-align: center;
        }
        
        button {
            padding: 5px 10px;
            margin: 0 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="score">Điểm: 0</div>
        <div id="controls">
            <button id="start-btn">Bắt đầu</button>
            <button id="stop-btn">Dừng</button>
            <div>Nhấp vào chữ hiragana bay để kiếm điểm!</div>
        </div>
    </div>

    <script>
        const hiraganaBasic = ['あ', 'い', 'う', 'え', 'お', 
                              'か', 'き', 'く', 'け', 'こ',
                              'さ', 'し', 'す', 'せ', 'そ',
                              'た', 'ち', 'つ', 'て', 'と',
                              'な', 'に', 'ぬ', 'ね', 'の',
                              'は', 'ひ', 'ふ', 'へ', 'ほ',
                              'ま', 'み', 'む', 'め', 'も',
                              'や', 'ゆ', 'よ',
                              'ら', 'り', 'る', 'れ', 'ろ',
                              'わ', 'を', 'ん'];
                              
        const hiraganaTenten = ['が', 'ぎ', 'ぐ', 'げ', 'ご',
                               'ざ', 'じ', 'ず', 'ぜ', 'ぞ',
                               'だ', 'ぢ', 'づ', 'で', 'ど',
                               'ば', 'び', 'ぶ', 'べ', 'ぼ'];
                               
        const hiraganaMaruyama = ['ぱ', 'ぴ', 'ぷ', 'ぺ', 'ぽ'];
        
        const container = document.getElementById('game-container');
        const scoreElement = document.getElementById('score');
        const startBtn = document.getElementById('start-btn');
        const stopBtn = document.getElementById('stop-btn');
        
        let score = 0;
        let gameInterval;
        let activeElements = [];
        
        function getRandomPosition() {
            const x = Math.random() * (window.innerWidth - 50);
            const y = Math.random() * (window.innerHeight - 50);
            return { x, y };
        }
        
        function getRandomVelocity() {
            const speed = 1 + Math.random() * 2;
            const angle = Math.random() * Math.PI * 2;
            return {
                x: Math.cos(angle) * speed,
                y: Math.sin(angle) * speed
            };
        }
        
        function createHiragana() {
            // Randomly decide if we'll create a basic, tenten or maruyama hiragana
            const type = Math.random();
            
            let char;
            if (type < 0.7) {
                // Basic hiragana (70% chance)
                char = hiraganaBasic[Math.floor(Math.random() * hiraganaBasic.length)];
            } else if (type < 0.9) {
                // Tenten hiragana (20% chance)
                char = hiraganaTenten[Math.floor(Math.random() * hiraganaTenten.length)];
            } else {
                // Maruyama hiragana (10% chance)
                char = hiraganaMaruyama[Math.floor(Math.random() * hiraganaMaruyama.length)];
            }
            
            const pos = getRandomPosition();
            const vel = getRandomVelocity();
            
            const element = document.createElement('div');
            element.className = 'hiragana';
            element.textContent = char;
            element.style.left = pos.x + 'px';
            element.style.top = pos.y + 'px';
            
            // Add tenten or maruyama mark if needed
            if (hiraganaTenten.includes(char)) {
                const tenten = document.createElement('div');
                tenten.className = 'tenten';
                tenten.textContent = '点点';
                tenten.style.left = (pos.x + 25) + 'px';
                tenten.style.top = (pos.y - 10) + 'px';
                element.appendChild(tenten);
            } else if (hiraganaMaruyama.includes(char)) {
                const maruyama = document.createElement('div');
                maruyama.className = 'maruyama';
                maruyama.textContent = '丸山';
                maruyama.style.left = (pos.x + 25) + 'px';
                maruyama.style.top = (pos.y - 10) + 'px';
                element.appendChild(maruyama);
            }
            
            element.addEventListener('click', () => {
                // Increase score based on type
                if (hiraganaBasic.includes(char)) {
                    score += 1;
                } else if (hiraganaTenten.includes(char)) {
                    score += 2;
                } else if (hiraganaMaruyama.includes(char)) {
                    score += 3;
                }
                
                scoreElement.textContent = `Điểm: ${score}`;
                container.removeChild(element);
                activeElements = activeElements.filter(e => e.element !== element);
            });
            
            container.appendChild(element);
            
            return {
                element,
                velocity: vel,
                position: pos
            };
        }
        
        function updatePositions() {
            activeElements.forEach(item => {
                item.position.x += item.velocity.x;
                item.position.y += item.velocity.y;
                
                // Bounce off walls
                if (item.position.x <= 0 || item.position.x >= window.innerWidth - 50) {
                    item.velocity.x *= -1;
                }
                
                if (item.position.y <= 0 || item.position.y >= window.innerHeight - 50) {
                    item.velocity.y *= -1;
                }
                
                item.element.style.left = item.position.x + 'px';
                item.element.style.top = item.position.y + 'px';
            });
        }
        
        function startGame() {
            stopGame();
            score = 0;
            scoreElement.textContent = `Điểm: ${score}`;
            
            // Clear any existing elements
            activeElements.forEach(item => {
                container.removeChild(item.element);
            });
            activeElements = [];
            
            // Create initial hiragana
            for (let i = 0; i < 10; i++) {
                activeElements.push(createHiragana());
            }
            
            // Start game loop
            gameInterval = setInterval(() => {
                updatePositions();
                
                // Occasionally add new hiragana
                if (Math.random() < 0.05 && activeElements.length < 20) {
                    activeElements.push(createHiragana());
                }
            }, 20);
        }
        
        function stopGame() {
            clearInterval(gameInterval);
        }
        
        startBtn.addEventListener('click', startGame);
        stopBtn.addEventListener('click', stopGame);
        
        // Start game automatically
        startGame();
    </script>
</body>
</html>
